<html>
<head>
    <link href="/static/css/common/bootstrap.min.css" type="text/css" rel="stylesheet" />
    <script src="/static/js/common/jquery-1.12.2.js" type="text/javascript" ></script>
    <script src="/static/js/common/bootstrap.min.js" type="text/javascript" ></script>
    <script src="http://twemoji.maxcdn.com/twemoji.min.js"></script>
</head>
<body>
<ul id="">
    <p title="笑脸" id="emoji-list">&#x1F600;</p>
    <li title="笑脸">&#x1F601;</li>
    <li title="哭脸">&#x1F602;</li>
    <li title="表情1">&#x1F603;</li>
    <li title="表情2">&#x1F604;</li>
    <li title="表情3">&#x1F605;</li>
    <li title="表情4">&#x1F606;</li>
    <li title="表情5">&#x1F607;</li>
    <li title="表情6">&#x1F608;</li>
    <li title="表情7">&#x1F609;</li>
    <li title="表情8">&#x1F60A;</li>
    <li title="表情9">&#x1F60B;</li>
    <li title="表情10">&#x1F60C;</li>
</ul>
<div contentEditable="true" id="editor"  style="height:70px;border-style:solid; border-width:1px; border-color:#AEEEEE"></div>
<div class="inputArea">
    <form>
        <textarea></textarea>
        <button type="button" onClick="onMessageSend()">发送</button>
    </form>
</div>
<div class="show"></div>

</body>
<script>
    twemoji.parse(document.getElementById('emoji-list'), {size: 36});


    $('#emoji-list li').on('click',function(){
        $(".inputArea textarea").focus(); //获取输入框焦点
        $(".inputArea textarea").val($(".inputArea textarea").val() + '[' + $(this).attr("title") + ']'+'&#x1F60C;');
    });
function onMessageSend() {
    var chatMessage = $('.inputArea textarea').val().replace(/\n/g, '_@').replace(/\r/g, '_#');
    chatMessage = chatMessage.replace(/_#_@/g, '<br/>');//IE7-8
    chatMessage = chatMessage.replace(/_@/g, '<br/>');//IE9、FF、chrome
    //替换，只写部分
    chatMessage = chatMessage.replace(/\[哭脸\]/g, '&#x1F602;');
    chatMessage = chatMessage.replace(/\[笑脸\]/g, '&#x1F601;');
    chatMessage = chatMessage.replace(/\[表情1\]/g, '&#x1F602;');
    chatMessage = chatMessage.replace(/\[表情2\]/g, '&#x1F604;');
    chatMessage = chatMessage.replace(/\[表情3\]/g, '&#x1F605;');
    chatMessage = chatMessage.replace(/\[表情4\]/g, '&#x1F606;');
    twemoji.parse(document.getElementsByTagName('body')[0], {size: 36});
}
    $(".inputArea textarea").ctrlEnter("button", function () {
        //获取textarea中的值并替换回车空格
        var chatMessage = $('.inputArea textarea').val().replace(/\n/g, '_@').replace(/\r/g, '_#');
        chatMessage = chatMessage.replace(/_#_@/g, '<br/>');//IE7-8
        chatMessage = chatMessage.replace(/_@/g, '<br/>');//IE9、FF、chrome
        //替换，只写部分
        chatMessage = chatMessage.replace(/\[哭脸\]/g, '&#x1F602;');
        chatMessage = chatMessage.replace(/\[笑脸\]/g, '&#x1F601;');
        chatMessage = chatMessage.replace(/\[表情1\]/g, '&#x1F602;');
        chatMessage = chatMessage.replace(/\[表情2\]/g, '&#x1F604;');
        chatMessage = chatMessage.replace(/\[表情3\]/g, '&#x1F605;');
        chatMessage = chatMessage.replace(/\[表情4\]/g, '&#x1F606;');
        twemoji.parse(document.getElementsByTagName('body')[0], {size: 36});
    });
</script>
</html>
